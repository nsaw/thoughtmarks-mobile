{
  "showInUI": true,
  "blockCommitOnError": true,
  "parseCheck": true,
  "onParseFail": "alert-and-rollback",
  "postMutationBuild": [
    "npm install --save-dev @types/testing-library__react-native @types/testing-library__jest-native",
    "chmod +x scripts/*.sh",
    "tsc --noEmit --skipLibCheck",
    "eslint . --ext .ts,.tsx --max-warnings=0",
    "yarn test:unit --watchAll=false",
    "node scripts/validate-dual-mount.js",
    "node scripts/validate-environment-specific.js",
    "node scripts/verify-layout-contracts.js",
    "node scripts/validate-z-index-protection.js",
    "node scripts/test-safe-frame-shells.js"
  ],
  "mode": "auto",
  "watchConsole": true,
  "onReloadHang": "Move to background and resume automatically",
  "branch": "feature/layout-contracts-definition",
  "notes": [
    "üß† MISSION: Define layout contracts and z-index protection with dual-mount validation",
    "üéØ GOAL: Establish layout contract system for sacred layouts and z-index protection with comprehensive testing",
    "üö® SAFETY ENFORCEMENT üö®",
    "‚úÖ Test layout contract validation, verify z-index protection, validate safe-frame shells",
    "‚úÖ Ensure proper testing and validation of layout protection mechanisms",
    "‚úÖ Validate z-index protection and safe-frame shells before proceeding",
    "üìù CONTEXT: Layout contracts are essential for the hybrid shell strategy. We need to define z-index contracts, safe-frame shells, and layout protection mechanisms for sacred layouts.",
    "üîí RELEVANCE: Critical for protecting sacred layouts during component migration",
    "üîÑ DUAL-MOUNT: This patch validates layout contracts work in both legacy and nextgen environments"
  ],
  "phases": [
    {
      "phase": 1,
      "step": 1,
      "attempt": 2,
      "task": "Define layout contracts and z-index protection with dual-mount validation",
      "version": "v1.4.202(P1.1.2)",
      "priority": "high",
      "estimatedTime": "90 minutes",
      "executionSteps": [
        "Create src-nextgen/shell/layout/LayoutContracts.ts",
        "Define layout contract interfaces with TypeScript",
        "Set up z-index protection system with validation",
        "Configure safe-frame shell contracts",
        "Set up layout validation system",
        "Install required testing dependencies",
        "Test layout contract functionality with comprehensive tests",
        "Validate z-index protection behavior in legacy environment",
        "Validate z-index protection behavior in nextgen environment",
        "Create layout protection validation scripts"
      ],
      "validation": [
        "Test layout contract validation",
        "Verify z-index protection working",
        "Confirm safe-frame shells functional",
        "Validate layout protection mechanisms",
        "Test z-index protection validation",
        "Verify layout protection scripts",
        "Validate dual-mount compatibility",
        "Test layout contracts in legacy environment",
        "Test layout contracts in nextgen environment"
      ],
      "rollbackPlan": [
        "Git tag for this step",
        "Can revert layout contract setup",
        "No impact on app functionality",
        "Restore original package.json if needed",
        "Preserve dual-mount system integrity"
      ],
      "gitTag": "layout-v1.4.202(P1.1.2)_layout-contracts-definition",
      "summaryFile": "summary-v1.4.202(P1.1.2)_layout-contracts-definition.md"
    }
  ],
  "validationGates": [
    "Parse and type checking (tsc --noEmit --skipLibCheck)",
    "ESLint validation (eslint . --ext .ts,.tsx --max-warnings=0)",
    "Unit test execution (yarn test:unit --watchAll=false)",
    "Dual-mount validation (validate-dual-mount.js)",
    "Environment-specific validation (validate-environment-specific.js)",
    "Layout contract validation",
    "Z-index protection validation",
    "Safe-frame shells validation",
    "Layout protection scripts validation"
  ],
  "successCriteria": [
    "Layout contracts defined with TypeScript",
    "Z-index protection working with validation",
    "Safe-frame shells functional with tests",
    "Layout protection mechanisms validated",
    "Z-index protection validation operational",
    "Layout protection scripts working",
    "Dual-mount compatibility confirmed",
    "Layout contracts work in both legacy and nextgen environments"
  ],
  "dualMountValidation": {
    "legacyEnvironment": {
      "validation": [
        "test -f THAWED-REFERENCE/src-reference/components/AutoRoleView.tsx",
        "test -f THAWED-REFERENCE/src-reference/theme/ThemeProvider.tsx",
        "node scripts/verify-layout-contracts.js --env=legacy"
      ],
      "rollback": [
        "git checkout THAWED-REFERENCE/src-reference/components/AutoRoleView.tsx",
        "git checkout THAWED-REFERENCE/src-reference/theme/ThemeProvider.tsx"
      ]
    },
    "nextgenEnvironment": {
      "validation": [
        "test -f src-nextgen/shell/layout/LayoutContracts.ts",
        "test -f src-nextgen/shell/layout/LayoutContracts.test.ts",
        "node scripts/verify-layout-contracts.js --env=nextgen"
      ],
      "rollback": [
        "git checkout src-nextgen/shell/layout/LayoutContracts.ts",
        "git checkout src-nextgen/shell/layout/LayoutContracts.test.ts"
      ]
    }
  },
    }
  ],
  "dependencies": {
    "dev": [
      "@types/testing-library__react-native",
      "@types/testing-library__jest-native"
    ]
  }
} 