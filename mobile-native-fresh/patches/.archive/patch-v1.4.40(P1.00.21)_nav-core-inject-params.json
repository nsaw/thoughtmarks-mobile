{
  "showInUI": true,
  "blockId": "patch-v1.4.40(P1.00.21)_nav-core-inject-params",
  "description": "Injects unified param + route types into navigation core and bridge context",
  "version": "patch-v1.4.40(P1.00.21)_nav-core-inject-params",
  "target": "MAIN",
  "notes": [
    "GOAL: Inject runtime-safe param and route types into navigation core layers",
    "MISSION: Harden navigation context and layout bridge with typed params",
    "CONTEXT: Core `useNavigation()` and param propagation require fully typed input to prevent route mismatch or param collision",
    "SAFETY ENFORCEMENT: PostMutation must validate all navigation screens compile and hydrate with injected params.",
    "STABLE STATE CHECK:",
    "VALIDATION REQUIREMENTS:",
    "[x] TypeScript compilation (tsc --noEmit)",
    "[x] ESLint validation (eslint . --ext .ts,.tsx --max-warnings=0)",
    "[x] Unit test execution (yarn test:unit --watchAll=false)",
    "[x] Runtime functionality testing (layout still bootable)",
    "[x] Route behavior validation (screens load)",
    "[x] Param propagation validation (no crashing on load)",
    "EXECUTION DIRECTIVES:",
    "- All shell commands must be backgrounded",
    "- Use `timeout` and `disown` to prevent terminal hang",
    "- Confirm UI hydration by validating screen bootup"
  ],
  "preCommit": {
    "backup": {
      "path": "/Users/sawyer/gitSync/_backups/",
      "file": "20250723_UTC_patch-v1.4.40(P1.00.21)_nav-core-inject-params_backup_tm-mobile-cursor.tar.gz"
    },
    "shell": [
      "export NODE_ENV=development",
      "echo '[P1.00.21] Pre-patch tasks: param injection into nav-core'"
    ]
  },
  "mutations": [
    {
      "path": "/Users/sawyer/gitSync/tm-mobile-cursor/mobile-native-fresh/src-nextgen/core/navigation/navigation.types.ts",
      "contents": "import type { RouteProp } from '@react-navigation/native';\n\nexport type AppRouteList = {\n  Home: undefined;\n  Settings: { section: string };\n  Profile: { userId: string };\n};\n\nexport type NavigationParam<T extends keyof AppRouteList> = RouteProp<AppRouteList, T>;"
    },
    {
      "path": "/Users/sawyer/gitSync/tm-mobile-cursor/mobile-native-fresh/src-nextgen/core/navigation/useTypedNavigation.ts",
      "contents": "import { useNavigation as useNativeNavigation } from '@react-navigation/native';\nimport type { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport type { AppRouteList } from './navigation.types';\n\nexport const useTypedNavigation = <T extends keyof AppRouteList>() => {\n  return useNativeNavigation<NativeStackNavigationProp<AppRouteList, T>>();\n};"
    }
  ],
  "postMutationBuild": {
    "shell": [
      "(timeout 30s tsc --noEmit || exit 101) >/dev/null 2>&1 & disown",
      "(timeout 30s eslint . --ext .ts,.tsx --max-warnings=0 || exit 102) >/dev/null 2>&1 & disown",
      "(timeout 60s yarn test:unit --watchAll=false || exit 103) >/dev/null 2>&1 & disown",
      "(timeout 30s bash scripts/validate-runtime.sh || exit 104) >/dev/null 2>&1 & disown",
      "(timeout 30s bash scripts/validate-boot.sh || exit 105) >/dev/null 2>&1 & disown",
      "(timeout 30s bash scripts/validate-components.sh || exit 106) >/dev/null 2>&1 & disown",
      "(timeout 30s bash scripts/validate-visual.sh || exit 107) >/dev/null 2>&1 & disown",
      "(timeout 30s bash scripts/validate-performance.sh || exit 108) >/dev/null 2>&1 & disown"
    ]
  },
  "validate": {
    "shell": [
      "test -f /Users/sawyer/gitSync/.cursor-cache/MAIN/summaries/summary-v1.4.40(P1.00.21)_nav-core-inject-params.md || exit 109",
      "grep -q 'PASS' /Users/sawyer/gitSync/.cursor-cache/MAIN/summaries/summary-v1.4.40(P1.00.21)_nav-core-inject-params.md || exit 110"
    ]
  },
  "final": {
    "git": {
      "commit": "[PATCH P1.00.21] nav-core-inject-params — safely types injected param routing core",
      "tag": "patch-v1.4.40(P1.00.21)_nav-core-inject-params"
    },
    "summary": "✅ patch-v1.4.40(P1.00.21)_nav-core-inject-params: Navigation route param system hardened with typed access layers. Passed all validations.",
    "summaryFile": "/Users/sawyer/gitSync/.cursor-cache/MAIN/summaries/summary-v1.4.40(P1.00.21)_nav-core-inject-params.md"
  },
  "blockCommitOnError": true,
  "watchConsole": true,
  "execution": {
    "autoReleaseTimeoutMs": 30000,
    "onReloadHang": "Move to background and resume automatically"
  },
  "enforceValidationGate": true,
  "strictRuntimeAudit": true,
  "runDryCheck": true,
  "forceRuntimeTrace": true,
  "requireMutationProof": true,
  "requireServiceUptime": true
} 