{
  "notes": [
    "🧠 MISSION: Project-wide Automated Cleanup of Duplicate Theme Declarations and Accessibility Handler Errors",
    "🎯 GOAL: Remove all but one `const { tokens } = useTheme();` per component/function. Move all accessibility props (accessibilityRole, accessible, accessibilityLabel) OUT of arrow functions (event handlers) and into the JSX props where they belong. Convert any malformed handlers (e.g., onPress={() = ...}) into valid arrow functions.",
    "✅ Before mutation, tag and back up project for full rollback.",
    "✅ Each mutated file must parse cleanly—revert and alert if not.",
    "✅ Run global lint and type-check after mutation. Abort and alert if fatal errors remain.",
    "📌 CONTEXT: Automated fixes required after bulk autofix introduced widespread duplicate hooks and malformed accessibility props.",
    "💥 Bug: Duplicate theme hooks, broken handler signatures, and accessibility props in handlers.",
    "🔧 Fix Summary: Deduplicate all `const { tokens } = useTheme();` per scope, refactor accessibility props to proper JSX props, and ensure all event handlers are valid arrow functions.",
    "🔐 RELEVANCE: Required for successful build, runtime, and future automated enforcement."
  ],
  "parseCheck": true,
  "onParseFail": "revert-and-alert",
  "postMutationBuild": "tsc --noEmit && npm run lint:fix-all",
  "blockCommitOnError": true,
  "alertUserOnParseFail": true,
  "preCommit": {
    "before": [
      "git add .",
      "git commit -m \"chore(rollback): backup before theme and accessibility bulk cleanup\"",
      "git tag v1.3.8_theme-accessibility-cleanup-rollback_$(date +'%y%m%d_%H%MUTC')",
      "sh scripts/backup-tag-push.sh v1.3.8_theme-accessibility-cleanup-rollback_$(date +'%y%m%d_%H%MUTC')"
    ]
  },
  "branch": "fix/v1.3.8_theme-accessibility-bulk-cleanup",
  "mode": "auto",
  "watchConsole": true,
  "onReloadHang": "Move to background and resume automatically",
  "phases": [
    {
      "section": "THEME AND ACCESSIBILITY ENFORCEMENT",
      "actions": [
        "For each .tsx file in src/:",
        "- Remove all duplicate `const { tokens } = useTheme();` so that each function/component contains only one, at the top of the function body.",
        "- Refactor all event handler props (onPress, onPressIn, onPressOut, etc) that incorrectly include accessibility props inside the handler arrow function. All `accessibilityRole`, `accessible`, and `accessibilityLabel` must be set as JSX props, never inside the handler.",
        "- For any malformed handlers (e.g. onPress={() = ...}), convert to standard arrow function (e.g. onPress={() => ...}) and move any prop assignments to the JSX prop list.",
        "- Confirm each file parses after mutation; revert and alert user for any parse errors."
      ],
      "commit": "fix: deduplicate tokens hook, fix accessibility props, cleanup handlers",
      "tag": "v1.3.8_theme-accessibility-cleanup_$(date +'%y%m%d_%H%MUTC')"
    }
  ],
  "final": {
    "commit": "chore: complete theme + accessibility enforcement project-wide",
    "tag": "v1.3.8_theme-accessibility-cleanup-complete_$(date +'%y%m%d_%H%MUTC')",
    "notes": "All UI components deduplicated, accessibility props fixed, all handlers valid. Lint and type-check clean. Full rollback and checkpoint tags applied."
  }
}

